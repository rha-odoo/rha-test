<?xml version="1.0"?>
<odoo>
    <record id="compute_unit_price_sza" model="base.automation">
        <field name="name">Unit price on cost and margin [SZA]</field>
        <field name="model_id" ref="sale.model_sale_order_line"/>
        <field name="state">code</field>
        <field name="code">
record['price_unit'] = record.purchase_price / (1 - record.x_studio_margin / 100)
        </field>
        <field name="trigger">on_change</field>
        <field name="on_change_field_ids" eval="[(6,0,[ref('sale_margin.field_sale_order_line__purchase_price')])]"/>
        <field name="active" eval="True"/>
    </record>
</odoo>
