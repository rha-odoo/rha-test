<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<record id="action_website_submit_tax_exemption" model="ir.actions.server">
		<field name="name">Submit Tax Exemption File - Jar</field>
		<field name="model_id" ref="website.model_website"/>
		<field name="state">code</field>
		<field name="website_published" eval="True"/>
		<field name="website_path">submit_file</field>
		<field name="code">
# Available variables:
#  - env: Odoo Environment on which the action is triggered
#  - model: Odoo Model of the record on which the action is triggered; is a void recordset
#  - record: record on which the action is triggered; may be void
#  - records: recordset of all records on which the action is triggered in multi-mode; may be void
#  - time, datetime, dateutil, timezone: useful Python libraries
#  - log: log(message, level='info'): logging function to record debug information in ir.logging table
#  - Warning: Warning Exception to use with raise
# To return an action, assign: action = {...}

partner = request.env.user.partner_id
datas = b64encode(request.params.get('tax_exemption_document').read())
file_name = request.params.get('tax_exemption_document').filename

partner.write({'x_tax_exemption_file': datas, 'x_tax_exemption_filename': file_name})
		</field>
	</record>
</odoo>