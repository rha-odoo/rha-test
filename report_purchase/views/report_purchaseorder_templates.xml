<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <template id="report_purchaseorder_document" inherit_id="purchase.report_purchaseorder_document">
        <xpath expr="//t[@t-set='address']" position="replace"/>

        <xpath expr="//h2" position="before">
            <div class="row pt64">
                <div class="col-4" t-if="o.partner_id">
                    <strong>To:</strong>
                    <div t-field="o.partner_id" t-options="{'widget': 'contact', 'fields': ['address', 'name', 'phone'], 'no_marker': True, 'phone_icons': True}"/>
                </div>
                <div t-if="o.partner_id" class="col-9">
                  <strong>Bill To:</strong>
                    <div t-field="o.partner_id" t-options="{'widget': 'contact', 'fields': ['address', 'name', 'phone'], 'no_marker': True, 'phone_icons': True}"/>
                    <p t-if="o.partner_id.vat"><t t-esc="o.company_id.country_id.vat_label or 'Tax ID'"/>: <span t-field="o.partner_id.vat"/></p>
                    <div t-if="o.dest_address_id" class="mt2">
                        <strong>Shipping address:</strong>
                        <div t-field="o.dest_address_id" t-options="{'widget': 'contact', 'fields': ['address', 'name'], 'no_marker': True}" name="purchase_shipping_address"/>
                    </div>
                </div>
            </div>
        </xpath>
   
        <!-- Table Body -->
        <xpath expr="//table[hasclass('o_main_table')]/tbody/t[@t-foreach='o.order_line']//span[@t-field='line.product_qty']" position="attributes">
            <attribute name="t-options">{'widget': 'float', 'precision': decimal_precision}</attribute>
        </xpath>
 
        <xpath expr="//span[@t-field='line.date_planned']" position="attributes">
            <attribute name="t-options">{"widget": "date"}</attribute>
        </xpath>
        <!-- END -->

        <xpath expr="//p[@t-field='o.notes']" position="before">
            <table class="table table-bordered table-sm mt32">
                <tr>
                    <th><strong>DELIVERY TERMS</strong></th>
                    <th class="text-center"><strong>SHIPP VIA</strong></th>
                    <th class="text-right"><strong>BUYER</strong></th>
                </tr>
                <tr rowspan="3">
                    <td><span t-field="o.incoterm_id"/></td>
                    <td class="text-center"><span t-field="o.ship_via"/></td>
                    <td class="text-right"><div t-field="o.user_id" t-options="{'widget': 'contact', 'fields': ['name', 'email'], 'no_marker': True}" name="purchase_representative"/></td>
                </tr>
            </table>
        </xpath>
    </template>

    <template id="external_layout_background_inherited_jar" inherit_id="web.external_layout_background">
        <xpath expr="//div[hasclass('o_background_header')]" position="replace">
            <div class="o_background_header">
                <div class="float-right">
                    <h3 class="mt0 text-right" t-field="company.report_header"/>
                </div>
                <div class="row">
                    <div class="col-4">
                        <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" class="float-left" alt="Logo"/>
                    </div>
                    <div class="col-4 company_address">
                        <div>
                            <strong t-field="company.partner_id.name"/>
                        </div>
                        <span t-field="company.partner_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;], &quot;no_marker&quot;: true}"/>
                    </div>
                    <div class="col-4 text-right">
                        <div t-if="o._name == 'purchase.order'" name="purchase_order">
                            <strong>Purchase Order #</strong>
                            <span t-field="o.name"/><br />
                            <strong>PO Date</strong>
                            <span t-field="o.date_order" t-options="{'widget': 'date'}"/><br />
                            <strong>Vendor ID:</strong>
                            <span t-field="o.partner_id.id"/>
                        </div>
                    </div>
                </div>
                <div class="clearfix mb8"/>
            </div>
        </xpath>
    </template>
</odoo>